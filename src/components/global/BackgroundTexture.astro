---
/**
 * TextureOverlay.astro
 * Añade una capa global de grano analógico.
 * Optimizado para no depender de archivos externos mediante SVG DataURI.
 */
---

<div class="texture-wrap">
    <div class="texture-grain"></div>
</div>

<style>
    .texture-wrap {
        pointer-events: none;
        z-index: 9999; 
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    .texture-grain {
        /* Usamos un SVG de ruido fractal como fallback o reemplazo del PNG */
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        
        width: 300%; 
        height: 300%;
        position: absolute;
        top: -100%;
        left: -100%;
        background-repeat: repeat;
        background-size: 256px;
        opacity: 0.045; /* Ajustado para el look premium de Vantta */
        
        /* Animación con steps para simular fotogramas de película */
        animation: grain-jump 0.6s steps(6) infinite;
        will-change: transform;
    }

    @keyframes grain-jump {
        0%, 100% { transform: translate(0, 0); }
        20% { transform: translate(-5%, -10%); }
        40% { transform: translate(-15%, 5%); }
        60% { transform: translate(7%, -12%); }
        80% { transform: translate(-2%, 15%); }
    }

    /* Soporte para usuarios que prefieren no ver parpadeos/movimiento */
    @media (prefers-reduced-motion: reduce) {
        .texture-grain {
            animation: none;
            opacity: 0.03;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }
    }
</style>